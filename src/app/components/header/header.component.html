<!-- Mobile Sidebar Menu Component -->
<!-- Make sure Tailwind CSS & Angular animation module are set up -->
<header
    class="sticky top-0 z-50 flex items-center justify-between border-b border-[var(--card-background-color)] bg-[var(--background-color)]/80 px-6 sm:px-10 py-4 backdrop-blur-md shadow-md transition-all duration-300">
    <div class="flex items-center gap-3 sm:gap-4">
        <!-- Logo -->
        <div class="size-8 text-[var(--primary-color)]">
            <svg viewBox="0 0 100 100" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M20,20 h30 a30,30 0 1,1 0,60 h-30 z M50,70 a20,20 0 0,0 0,-40 h-10 v40 z" />
            </svg>
        </div>

        <!-- Brand Title -->
        <h2 class="text-[var(--text-color)] text-2xl font-bold tracking-tight">
            <span class="text-[var(--primary-color)]">PM</span>Dev<span class="text-purple-600">Suite</span>
        </h2>
    </div>
    <nav class="hidden md:flex items-center gap-8 cursor-pointer">
        <a class="nav-link" (click)="scrollToSection('home')">Home</a>
        <a class="nav-link" (click)="scrollToSection('about')">About</a>
        <a class="nav-link" (click)="scrollToSection('experience')">Experience</a>
        <a class="nav-link" (click)="scrollToSection('education')">Education</a>
        <a class="nav-link" (click)="scrollToSection('skills')">Skills</a>
        <a class="nav-link" (click)="scrollToSection('projects')">Projects</a>
        <a class="nav-link" (click)="scrollToSection('contact')">Contact</a>
    </nav>
    <button
        class="animate-bounce hidden md:flex min-w-[84px] h-10 px-4 rounded-lg bg-[var(--primary-color)] hover:bg-purple-700 transition-colors duration-300 text-white text-sm font-bold"
        (click)="showResume = true">
        <span class="truncate" style="align-content: center;">Resume</span>
    </button>
    <!-- Mobile menu toggle -->
    <div class="md:hidden">
        <button (click)="toggleSidebar()" class="text-[var(--text-color)]">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>
</header>

<div *ngIf="isSidebarOpen"
    class="fixed inset-0 z-40 bg-black/60 backdrop-blur-md transition-opacity duration-500 ease-in-out"
    (click)="toggleSidebar()">
</div>

<!-- Sidebar -->
<div class="fixed top-0 right-0 z-50 h-full w-72 bg-[var(--background-color)] shadow-xl transform transition-transform duration-500 ease-in-out"
    [ngClass]="{ 'translate-x-0': isSidebarOpen, 'translate-x-full': !isSidebarOpen }">
    <div class="bg-[var(--background-color)]" style="height: 100vh;">
        <div class="flex justify-end p-4 bg-[var(--background-color)]">
            <button (click)="toggleSidebar()" class="text-[var(--text-color)] hover:text-[var(--primary-color)]">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <nav class="flex flex-col gap-6 px-6 py-4 bg-[var(--background-color)]">
            <a class="nav-link-mobile" (click)="scrollToSection('home')" (click)="toggleSidebar()">Home</a>
            <a class="nav-link-mobile" (click)="scrollToSection('about')" (click)="toggleSidebar()">About</a>
            <a class="nav-link-mobile" (click)="scrollToSection('experience')" (click)="toggleSidebar()">Experience</a>
            <a class="nav-link-mobile" (click)="scrollToSection('education')" (click)="toggleSidebar()">Education</a>
            <a class="nav-link-mobile" (click)="scrollToSection('skills')" (click)="toggleSidebar()">Skills</a>
            <a class="nav-link-mobile" (click)="scrollToSection('projects')" (click)="toggleSidebar()">Projects</a>
            <a class="nav-link-mobile" (click)="scrollToSection('contact')" (click)="toggleSidebar()">Contact</a>
            <button
                class="mt-6 bg-[var(--primary-color)] text-white py-2 rounded-md font-bold hover:bg-purple-700 transition"
                (click)="showResume = true">Resume</button>
        </nav>
        <div
            class="flex justify-center gap-4 mt-auto px-6 py-6 border-t border-[var(--card-background-color)] bg-[var(--background-color)]">
            <a href="#" class="text-[var(--text-color)] hover:text-[#0A66C2] transition" aria-label="LinkedIn">
                <i class="fab fa-linkedin text-2xl"></i>
            </a>
            <a href="#" class="text-[var(--text-color)] hover:text-[#E1306C] transition" aria-label="Instagram">
                <i class="fab fa-instagram text-2xl"></i>
            </a>
            <a href="#" class="text-[var(--text-color)] hover:text-[#1DA1F2] transition" aria-label="Twitter">
                <i class="fab fa-twitter text-2xl"></i>
            </a>
            <a href="mailto:youremail@example.com"
                class="text-[var(--text-color)] hover:text-[var(--primary-color)] transition" aria-label="Email">
                <i class="fas fa-envelope text-2xl"></i>
            </a>
            <a href="#" class="text-[var(--text-color)] hover:text-[#333] transition" aria-label="GitHub">
                <i class="fab fa-github text-2xl"></i>
            </a>
        </div>
    </div>
</div>


<!-- Resume Modal -->
<div *ngIf="showResume" style="position: relative; justify-self: center; z-index: 222;"
    class="relative w-[95%] max-w-5xl h-[90vh] bg-white rounded-xl overflow-hidden shadow-2xl flex flex-col items-center justify-center bg-black/60  backdrop-blur-md animate-fade-in-up">
    <button class="absolute top-4 right-4 z-10 text-gray-600 hover:text-red-500" (click)="showResume = false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
    <!-- Mobile: Image Preview -->
    <img *ngIf="isMobile" [src]="resumeImage" alt="Resume Preview" class="w-full object-contain h-full" />
    <!-- Desktop: PDF View -->
    <iframe *ngIf="!isMobile" [src]="resumeUrl | safeUrl" type="application/pdf" class="flex-1 w-full h-full"></iframe>
    <div class="p-4 bg-white border-t border-gray-200 flex justify-start">
        <a [href]="resumeUrl" download
            class="bg-[var(--primary-color)] text-white px-4 py-2 rounded shadow hover:bg-purple-700 transition">
            Download Resume
        </a>
    </div>
</div>